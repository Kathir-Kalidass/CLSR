:root {
  --bg1: #09101f;
  --bg2: #112445;
  --bg3: #0c4b4f;
  --card: rgba(8, 18, 36, 0.68);
  --border: rgba(255, 255, 255, 0.16);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Poppins", "Segoe UI", sans-serif;
  background: radial-gradient(circle at 12% 14%, #194b80 0%, transparent 35%),
    radial-gradient(circle at 88% 22%, #0b7f64 0%, transparent 42%),
    linear-gradient(135deg, var(--bg1), var(--bg2) 48%, var(--bg3));
  overflow-x: hidden;
}

.bg-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(120deg, rgba(255, 255, 255, 0.022), rgba(255, 255, 255, 0.022) 2px, transparent 2px, transparent 14px);
  opacity: 0.36;
}

.title-main { margin: 0; font-size: clamp(1.6rem, 2.5vw, 2.5rem); line-height: 1.14; letter-spacing: 0.02em; font-weight: 700; }
.section-title { margin: 0; font-size: 1.15rem; font-weight: 650; letter-spacing: 0.01em; }
.sub-title { margin: 0; font-size: 1rem; font-weight: 600; }

.card {
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: 1rem;
  backdrop-filter: blur(14px);
  box-shadow: 0 12px 36px rgba(0, 0, 0, 0.3);
}

.control-row { display: flex; gap: 0.55rem; flex-wrap: wrap; }

.ctrl-btn {
  border: 1px solid rgba(255, 255, 255, 0.22);
  border-radius: 0.65rem;
  padding: 0.45rem 0.85rem;
  font-size: 0.9rem;
  font-weight: 700;
  transition: transform 180ms ease, filter 180ms ease;
}

.ctrl-btn:hover { transform: translateY(-1px); filter: brightness(1.08); }
.ctrl-btn:disabled { opacity: 0.45; cursor: not-allowed; transform: none; }

.ctrl-start { background: rgba(16, 185, 129, 0.28); }
.ctrl-stop { background: rgba(239, 68, 68, 0.28); }
.ctrl-clear { background: rgba(14, 165, 233, 0.28); }
.ctrl-tts { background: rgba(139, 92, 246, 0.28); }
.ctrl-tts.ctrl-tts-off { background: rgba(100, 116, 139, 0.3); }

.pill-cyan, .pill-green, .pill-amber, .pill-violet {
  border-radius: 999px;
  padding: 0.32rem 0.62rem;
  font-weight: 600;
  font-size: 0.86rem;
}

.pill-cyan { background: rgba(6, 182, 212, 0.18); color: #b6f3ff; }
.pill-green { background: rgba(16, 185, 129, 0.2); color: #c6ffe4; }
.pill-amber { background: rgba(245, 158, 11, 0.2); color: #ffe0a8; }
.pill-violet { background: rgba(139, 92, 246, 0.22); color: #e8dbff; }

.flow-lane { position: relative; padding: 0.4rem 0.25rem 0.1rem; }
.flow-track { height: 7px; border-radius: 999px; background: linear-gradient(90deg, rgba(56, 189, 248, 0.26), rgba(52, 211, 153, 0.3)); }
.flow-dot { position: absolute; top: 2px; left: 0; width: 16px; height: 16px; border-radius: 50%; background: radial-gradient(circle at 35% 35%, #dcf5ff, #06b6d4); box-shadow: 0 0 22px rgba(6, 182, 212, 0.85); }
.flow-stages { display: grid; grid-template-columns: repeat(7, minmax(0, 1fr)); gap: 0.36rem; margin-top: 0.65rem; }

.flow-stage {
  text-align: center;
  border: 1px solid rgba(148, 163, 184, 0.35);
  background: rgba(15, 23, 42, 0.72);
  border-radius: 0.55rem;
  padding: 0.3rem 0.2rem;
  font-size: 0.8rem;
  font-weight: 700;
  color: #cbd5e1;
}

.flow-stage.active { border-color: rgba(56, 189, 248, 0.95); color: #d9faff; box-shadow: 0 0 18px rgba(56, 189, 248, 0.4); }

.camera-shell {
  position: relative;
  overflow: hidden;
  aspect-ratio: 16 / 9;
  border-radius: 0.95rem;
  border: 2px solid rgba(71, 85, 105, 0.85);
  background: linear-gradient(130deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.75));
}

.camera-shell::after {
  content: "";
  position: absolute;
  inset: -9px;
  border-radius: 1rem;
  border: 2px solid rgba(34, 211, 238, 0.35);
  opacity: 0;
}

.camera-shell.pulsing::after { animation: pulseRing 1.15s ease-out infinite; }

@keyframes pulseRing {
  0% { transform: scale(0.98); opacity: 0.76; }
  100% { transform: scale(1.05); opacity: 0; }
}

.status-dot { width: 11px; height: 11px; border-radius: 50%; background: #f97316; box-shadow: 0 0 0 rgba(249, 115, 22, 0.5); }
.status-dot.active { background: #22c55e; animation: dotBeat 1.35s ease-out infinite; }

@keyframes dotBeat {
  0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.5); }
  100% { box-shadow: 0 0 0 12px rgba(34, 197, 94, 0); }
}

.panel-strong, .panel-sentence, .panel-audio {
  margin-top: 0.55rem;
  border-radius: 0.75rem;
  background: rgba(255, 255, 255, 0.06);
  padding: 0.7rem 0.85rem;
}

.panel-strong { min-height: 3.2rem; font-size: 1.28rem; font-weight: 700; letter-spacing: 0.04em; color: #9df6ff; }
.panel-sentence { min-height: 3.5rem; font-size: 1.18rem; color: #b9f8dd; font-weight: 540; }
.panel-audio { margin-top: 0.45rem; font-size: 1rem; color: #ffe6ad; font-weight: 600; }

.history-list {
  margin-top: 0.55rem;
  min-height: 7rem;
  max-height: 13rem;
  overflow: auto;
  border-radius: 0.8rem;
  border: 1px solid rgba(34, 211, 238, 0.35);
  background: rgba(3, 13, 24, 0.62);
  padding: 0.5rem;
}

.history-item {
  display: flex;
  align-items: center;
  gap: 0.55rem;
  border: 1px solid rgba(148, 163, 184, 0.18);
  border-radius: 0.5rem;
  padding: 0.38rem 0.5rem;
  margin-bottom: 0.34rem;
  font-size: 0.88rem;
  color: #d8f8ff;
}

.history-item .idx {
  width: 1.3rem;
  height: 1.3rem;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(34, 211, 238, 0.2);
  font-size: 0.76rem;
  font-weight: 700;
}

.module {
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: rgba(15, 23, 42, 0.72);
  border-radius: 0.9rem;
  padding: 0.95rem;
  transition: border-color 220ms ease, transform 220ms ease;
}

.module.is-hot { border-color: rgba(34, 211, 238, 0.95); transform: translateY(-2px); }
.module-title { margin: 0 0 0.55rem; color: #a5f3fc; font-size: 1.03rem; font-weight: 700; }
.module-field { margin: 0.24rem 0; color: #d7e4f4; font-size: 0.9rem; line-height: 1.37; }
.module-field span:first-child { color: #67e8f9; font-weight: 700; }

.parser-box {
  margin-top: 0.58rem;
  border: 1px dashed rgba(34, 211, 238, 0.42);
  border-radius: 0.7rem;
  padding: 0.45rem 0.55rem;
  background: rgba(2, 16, 30, 0.72);
}

.parser-title { font-size: 0.76rem; color: #67e8f9; text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.3rem; font-weight: 700; }
.parser-lines { font-family: "JetBrains Mono", "Consolas", monospace; font-size: 0.76rem; color: #d8f8ff; line-height: 1.35; min-height: 2.2rem; }
.module-note { margin-top: 0.58rem; font-size: 0.82rem; color: #a8bdcf; border-top: 1px dashed rgba(148, 163, 184, 0.35); padding-top: 0.45rem; }

.parser-console {
  margin-top: 0.55rem;
  min-height: 10.5rem;
  max-height: 14rem;
  overflow: auto;
  border-radius: 0.8rem;
  border: 1px solid rgba(34, 211, 238, 0.35);
  background: rgba(3, 13, 24, 0.88);
  padding: 0.7rem;
  font-family: "JetBrains Mono", "Consolas", monospace;
  font-size: 0.78rem;
  line-height: 1.38;
  color: #c8f9ff;
}

@media (max-width: 900px) {
  .flow-stages { grid-template-columns: repeat(4, minmax(0, 1fr)); }
}
